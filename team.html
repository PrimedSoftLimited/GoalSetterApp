<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="images/gs2.jpg" type="image/x-icon" />
    <title id="title">Manage Team</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script src="js/preloader.js"></script>
    <link rel="stylesheet" href="main/css/bootstrap.min.css">
    <link rel="stylesheet" href="main/animate.css">
    <link rel="stylesheet" href="main/style.css">
    <link rel="stylesheet" href="main/part_2.css">
    <link rel="stylesheet" href="main/goal.css">
    <link rel="stylesheet" href="fontawesome-free-5.6.1-web/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Yatra+One" rel="stylesheet">
    <script src="js/javascript.js"></script>
    </head>
    
    <body class="Dashboard">
    
        <div class="se-pre-con">
            <p align="center"></p>
        </div>
        <div class="container-fluid px-0">
            <nav class="navbar navbar-expand-md navbar-dark bg-nav top_nav">
                <div class="container-fluid px-0">
                    <div class="navbar-header">
                        <p style="color:#3768a0; margin: 0; font-size: 20px;font-family: 'Yatra One', cursive;"><img class=" animated fadeIn"
                                id="img_logo" src="images/gs2.jpg" alt=""> GoalSetter</p>
                    </div>
                    <ul class="nav navbar-nav ml-auto">
                        <li class="active">
            
                            <div class="notification animated fadeIn">
                                <i class="fa fa-comments out4"></i>
                                <i class="fa fa-bell" aria-hidden="true"></i>
                            </div>
                            <div class="welcome_user_img animated fadeIn" id="user_dash_img_goal"></div>
            
                        </li>
                    </ul>
                </div>
            </nav>
            <nav class="navbar  navbar-expand-md navbar-dark bg-nav top_nav" style="background: skyblue; height: 30px;">
                <div class="container-fluid">
                    <ul class="nav navbar-nav ml-auto">
                        <li class="active">
                            <pre id="welcome_pre" class="animated fadeIn"><p class="welcome_user_name"  id="user_dash_name_goal"></p></pre>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    <!--body-->
    <div class="container-fluid px-0">
        <div class="dashboard_holder row">
            <div class="col-lg-2 border col-md-12 col-sm-12">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link profill" href="dashboard.html">
                        <i class="fa fa-bars out1"></i> Dashboard
                    </a>
                    <a class="nav-link profill" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab"
                        aria-controls="v-pills-home" aria-selected="true">
                        <i style="color:rgb(245, 149, 197);" class="fa fa-users"></i> Team Information
                    </a>
                    <a class="nav-link profill" id="v-pills-add-tab" data-toggle="pill" href="#v-pills-add" role="tab"
                        aria-controls="v-pills-add" aria-selected="false">
                        <i class="fa fa-pen"></i> Edit Team Name
                    </a>
                    <a class="nav-link profill" id="v-pills-add-tab" data-toggle="pill" href="#v-pills-add_task" role="tab"
                        aria-controls="v-pills-add" aria-selected="false">
                        <i class="fa fa-pen" style="color:#a4af09cc;"></i> Add New Member
                    </a>
                    <a class="nav-link profill" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-del" role="tab"
                        aria-controls="v-pills-del" aria-selected="false" style="cursor:pointer; color:tomato;" id="delete">
                        <i class="fas fa-trash-alt"></i></i> Delete Team
                    </a>

                    <a class="nav-link profill">

                    </a>


                </div>
            </div>

            <div class="col-lg-7 border col-md-12 col-sm-12" style="background-color:#F8F8FF;">
                <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab"
                        style="height: 85.5vh;">  
                        <div class="spinner-border text-muted" id="spin_all_my_teams"></div>
                        <div class="modal-header">
                            <h4 class="modal-title"><i style="color:rgb(245, 149, 197);" class="fa fa-users"></i>
                                <span id="team_title"></span></h4>
                        </div>
                        <div id="team_members" class="scroll_design">
                            
                        </div>
                        <div id="create_team_btn">

                        </div>
                    </div>

                    <!--this is to add the goal-->
                    <div class="tab-pane fade" id="v-pills-add" role="tabpanel" aria-labelledby="v-pills-add-tab" style="height: 85.5vh;">
                        <div id="spin_bx_add_goal">
                            <div class="spinner-border text-muted" id="spin_edit"></div>
                        </div>
                        <div id="show_goal_dash" class="msg_alert_box">

                        </div>
                        <div class="modal-header">
                            <h4 class="modal-title"><i style="color:rgb(245, 149, 197);" class="fa fa-users"></i> Edit Team Name</h4>
                        </div>

                        <!-- Modal body -->
                        <form id="editTeam">
                            <div class="modal-body" style=" height: 72vh;">
                                <label style="color:#3768a0;">New Team Name :</label><br>
                                <input style="background-color:#ffffff; border:1px solid; width: 100%; font-size: 25px;  height: 50px; color:#3768a0"
                                    class="form-control" id="edit_title" type="text" placeholder="Enter team name">
                                <p style='color:tomato; margin:0; font-weight: bold; font-size: 10px;' id="err_edit_title"></p>    
                                <div class="modal-footer">
                                    <!-- <ANY data-toggle="modal" data-target="TARGET-2" data-dismiss="modal"> data-toggle="modal" data-target="#myModal4" -->
                                    <button type="submit" class="btn btn-primary" style="font-size:15px;">Strike Update</button>
                                    <!-- </ANY>   -->
                                </div>
                            </div>
                        </form>
                    </div>

                    <!--Deete A FORM -->
                    <div class="tab-pane fade" id="v-pills-del" role="tabpanel" aria-labelledby="v-pills-del-tab">
                        <div id="spin_bx_del_goal">
                            <div class="spinner-border text-muted" id="spin_edit"></div>
                        </div>

                        <div class="modal-header">
                            <h4 class="modal-title"><i style="color:rgb(245, 149, 197);" class="fa fa-users"></i> Delete Team</h4>
                        </div>

                        <div id="del_goal_tab">
                            <div class="profile-name col-12 text-center">
                                <h4 id="head_del">Are you sure you want to delete this Team?</h4>
                                <p style="color:tomato; font-size: 12px;"><i class="fas fa-hand-point-right"></i> All members added to this team will be removed</p>
                            </div>
                            <div id="del_div">
                                <form id="delete_team">
                                    <input id="del_goal_btn" class="btn" type="submit" value="Strike Delete">
                                </form>
                            </div>
                        </div>
                    </div>

                    <!--Add task-->
                    <div class="tab-pane fade" id="v-pills-add_task" role="tabpanel" aria-labelledby="v-pills-add_task-tab"
                        style="height: 85.5vh;">
                        <div id="spin_add_task">
                            <div id="spin_edit"><img id="goal_icon" style="max-width:100px; max-height:100px;" src="images/member_loader.gif"></div>
                        </div>
                        <div id="show_task_dash" class="msg_alert_box">

                        </div>
                        <div class="modal-header">
                            <h4 class="modal-title"><i class="fas fa-user-friends" style="color:#a4af09cc;"></i> Add Member</h4>
                        </div>

                        <!-- Modal body -->
                            <div class="modal-body" style=" height: 72vh;">
                                <label style="color:#3768a0;">Search Member:</label><br>
                                <input style="background-color:#ffffff; border:1px solid; width: 100%; height: 50px; font-size: 25px; color:#3768a0"
                                    class="form-control" id="search_term" type="text" placeholder="Enter member name">
                                <p style='color:tomato; margin:0; font-weight: bold; font-size: 10px;' id="err_search_term"></p>
                                <div id="all_search_term">
                            
                                </div>
                            </div>
                    </div>


                </div>
            </div>


            <div class="col-lg-3 border text-center col-md-12 col-sm-12">
                <div id="activities" style="background-color:#e6e6e6; height:82vh; margin-top:10px;">
                    <h6 style="color:#0F799E;">
                        <div style="height:10px;"></div><i class="fa fa-chart-line out5"></i> Recent Activities
                    </h6>
                    <hr style="background:#e6e6e6;">
                    <div id="dash_highlight" class="animated fadeIn">
                        <div class="spinner-border text-muted" id="spin_activities"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- --------------------------Modal view -----------////////////////////////////////////////////////////////////////////////////////////////////////////////////////////------------------------------>
    <div class="modal fade" id="memberInfo">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Member Information</h5>
                    <button style="padding:5px;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="scroll_design">
                        <div class="profile-name col-12 text-center">
                            <img id="member_user_image" src="images/text_loader.gif" />
                        </div>
                        <div class="profile-name col-12 text-center">
                            <h4 id="member_name"></h4>
                        </div>
                        <table class="table" style="color:#2d80ce">
                            <tbody id="task_detail">
                                <tr>
                                    <td>Member Email :</td>
                                    <td id="member_email"></td>
                                </tr>
                                <tr>
                                    <td>Memeber Phone :</td>
                                    <td id="member_phone"></td>
                                </tr>
                                <tr>
                                    <td>DATE CREATED</td>
                                    <td id="member_created"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#chat">Chat</button>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#assignTask">Assign Tasks</button>
                    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delMember">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4">
        <div class="modal fade" id="stat">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div id="spin_bx">
                        <div class="spinner-border text-muted" id="spin_edit"></div>
                    </div>
                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title" id="bigName2">Statistics</h4>
                        <button class="btn btn-primary cls" type="button" data-target="#myModal" data-dismiss="modal">
                            Close
                        </button>
                    </div>
                    <div id="show_success" class="msg_alert_box">

                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-6">
                                <label style="color:#3768a0; font-weight: bold;">Total Tasks:</label>
                                <div>
                                    <input type="text" style="width:100%; color:#3768a0; font-weight: bold; font-size: 20px;"
                                        class="field" placeholder="Total Task" id="totalTask" disabled>
                                </div>
                            </div>

                            <div class="col-6">
                                <label style="color:#3768a0; font-weight: bold;">Completed Tasks:</label>
                                <div>
                                    <input type="text" style="width:100%; color:#3768a0; font-weight: bold; font-size: 20px;"
                                        class="field" placeholder="Total Completed" id="totalCompleted" disabled>
                                </div>
                            </div>

                            <div class="col-6">
                                <label style="color:#3768a0; font-weight: bold;">Uncompleted Tasks:</label>
                                <div>

                                    <input type="text" style="width:100%; color:#3768a0; font-weight: bold; font-size: 20px;"
                                        class="field" placeholder="Total Uncompleted" id="totalUncompleted" disabled>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- --------------------------Assign Task------------------------>
    <div class="modal fade" id="assignTask">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div id="spin_assign_task">
                    <div id="spin_edit"><img id="goal_icon" style="max-width:50px; max-height:50px;" src="images/member_loader.gif"></div>
                </div>
                <div id="show_assign_detail" class="msg_alert_box cls">

                </div>
                <div class="modal-header">
                    <h5 class="modal-title" >
                        Assign Tasks <i style="color:black;font-size:15px;" class="fa fa-arrow-right" aria-hidden="true"></i>
                        <span id="name_assign"></span>
                    </h5>
                    <button style="padding:5px;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-12">
                                <select style="border:1px solid black; width: 100%; color:black" 
                                    class="form-control" id="goal_assign">
                                    
                                </select>
                            </div>
                            <div class="col-12">
                                <p style="text-align:center;margin: 0;" id="assign_place"></p>
                                <p style="text-align:center;" id="assign_note"></p>
                                <div id="add_assign" class="col-12 scroll_design" style="height:27vh;">
                                    
                                </div>
                                <p style="text-align:center;margin: 0;" id="revert_place"></p>
                                <p style="text-align:center;" id="revert_note"></p>
                                <div id="remove_assign" class="col-12 scroll_design" style="height:27vh;">
                                     
                                </div>
                           </div>
                        </div>
                        <input id="member_id_assign" type="hidden" value="">
                    </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <!-- Complete  Goal-->
    <div class="container mt-4">
        <div class="modal fade" id="complete">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div id="spin_bx_delete">
                        <div class="spinner-border text-muted" id="spin_edit"></div>
                    </div>
                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title" id="bigName2">Strike Complete</h4>
                        <button class="btn btn-primary cls" type="button" data-target="#myModal" data-dismiss="modal">
                            Close
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="delete_profile">
                            <div class="row">
                                <div class="col-12">
                                    <label style="color:#3768a0;">Are you sure this goal is completed ?</label>
                                    <p style="font-size:10px; color:tomato;">Please note all tasks related to this goal
                                        will be marked completed and this goal will be deleted after 3 days</p>
                                    <button type="submit" name="register" id="registe" style="width:100%;">Strike
                                        Complete</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Statistic--->
    <div class="container mt-4">
        <div class="modal fade" id="memberstat">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div id="spin_bx">
                        <div class="spinner-border text-muted" id="spin_edit"></div>
                    </div>
                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title stat_name" id="bigName2"></h4>
                        <button class="btn btn-primary cls" type="button" data-target="#myModal" data-dismiss="modal">
                            Close
                        </button>
                    </div>
                    <div id="show_success" class="msg_alert_box">
    
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-6">
                                <label style="color:#3768a0; font-weight: bold;">Total Members:</label>
                                <div>
                                    <input type="text" style="width:100%; color:#3768a0; font-weight: bold; font-size: 20px;"
                                        class="field" id="tm" disabled>
                                </div>
                            </div>
    
                            <div class="col-6">
                                <label style="color:#3768a0; font-weight: bold;">Total Assigned Task:</label>
                                <div>
                                    <input type="text" style="width:100%; color:#3768a0; font-weight: bold; font-size: 20px;"
                                        class="field" id="tat" disabled>
                                </div>
                            </div>
                        </div>
    
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- --------------------------Modal view Chat -----------////////////////////////////////////////////////////////////////////////////////////////////////////////////////////------------------------------>
    <div class="modal fade" id="chat">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <img class="chat_image" id="chat_image" src="images/text_loader.gif" />
                    <div class="chat_name">
                        <h5 class="modal-title" id="chat_name">
                            <img  id="chat_image"src="images/text_loader.gif" />
                        </h5>
                        <div id="presence_status">
                            <div style="color: lightgreen;">online</div>
                            <!-- <div style="color: red;">offline</div> -->
                        </div>
                    </div>
                    
                    <button style="padding:5px;" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
    
                    <div class="scroll_design">
                        <p style="color:tomato; margin:0; font-weight: bold; font-size: 10px;" id="err_chat"></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <div id="chat_text" style=" width:100%;">
                        <form id="chat_data">
                            <input type="hidden" value="" id="member_id_chat">
                            <input type="hidden" value="" id="rel_id_chat">
                            <textarea class="form-control" id="chat_msg" placeholder="Type a message"></textarea>
                            <button id="send_chat" type="submit" class="btn btn-primary" data-toggle="modal" data-target="#chat">
                                Send <i style="color:skyblue;" class="fa fa-paper-plane" aria-hidden="true"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Delete Task-->
    <div class="container mt-4">
        <div class="modal fade" id="delMember">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div id="show_member_del" class="msg_alert_box cls">

                    </div>
                    <div id="spin_bx_task_delete">
                        <div class="spinner-border text-muted" id="spin_edit"></div>
                    </div>

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h4 class="modal-title" id="bigName2">Delete Member</h4>
                        <button class="btn btn-primary cls" type="button" data-target="#myModal" data-dismiss="modal">
                            Close
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="delete_member">
                            <div class="row">
                                <div class="col-12">
                                    <label style="color:#3768a0;">Are you sure want to delete member from this Team?</label>
                                    <input id="member_id_delete" type="hidden" value="">
                                    <input id="rel_id_delete" type="hidden" value="">
                                    <button class="del_task_btn" type="submit" name="register" id="registe" style="width:100%;">Strike
                                        Delete</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--This is the silent dive to let the activities work for the goal page-->
    <div id="all_activities" style="display:none"></div>
    <div id="spin_all_activities" style="display:none"></div>
    <script src="js/js/jquery.min.js"></script>
    <script src="js/js/bootstrap.min.js"></script>
    <script src="js/axios.js"></script>
    <script src="js/activities.js"></script>
    <script src="js/teamjs/manageTeam.js"></script>
    <script src="js/teamjs/manageTeamMebersHome.js"></script>
    <script src="js/teamjs/assigntask_team.js"></script>
</body>

</html>
<script>
    $(document).ready(function () {

        $(document).on("change", ".img_set", function () {

            var img_file = $("#user_image").val();
            if (img_file !== "user-jpg") {
                $("#img_save").show();
                $("#box_set").hide();
                $("#registe").hide();
            } else {
                $("#img_save").hide();
                $("#box_set").show();
                $("#registe").show();
            }
        });
        $(document).on("click", ".cls", function () {
            $("#img_save").hide();
            $("#box_set").show();
            $("#show_success").hide();
            $("#registe").show();
            $("#show_task_edit").hide();
            $("#show_member_del").hide();
            $("#show_assign_detail").hide();
        });
        $(document).on("click", "#show_goal_dash", function () {
            $("#show_goal_dash").hide();
        });
        $(document).on("click", '#show_task_dash', function () {
            $("#show_task_dash").hide();
        });
        $(document).on("click", '#addMember', function () {
            var member_id = $(this).data('getmemid');
             addNewMember(member_id);
        });
         $(document).on("click", '#assignMemberTask', function () {
            var task_id = $(this).data('gettaskid');
            assignTask(task_id);
        });
        $(document).on("click", '#revertMemberTask', function () {
            var task_id = $(this).data('gettaskid');
            revertTask(task_id);
        });
        $(document).on("click", '.member_view', function () {
            var rel_id = $(this).data('getrelid');
            var member_id = $(this).data('getmemid');
            var member_name = $(this).data('getname');
            var member_phone = $(this).data('phone');
            var member_email = $(this).data('email');
            var member_user_image = $(this).data('userimage');
            var member_created = $(this).data('getadded');

           $("#chat_name").html("&nbsp;"+member_name + "&nbsp;");
            $("#member_id_assign").val(member_id);
            $("#member_id_delete").val(member_id);
            $("#rel_id_delete").val(rel_id);
            $("#member_name").html(member_name);
            $("#member_phone").html(member_phone);
            $("#member_email").html(member_email);
            $("#member_created").html(member_created);
             $("#name_assign").html(member_name);
           

             document.getElementById('member_user_image').src =  "http://res.cloudinary.com/getfiledata/image/upload/w_200,c_thumb,ar_4:4,g_face/" + member_user_image;
             document.getElementById('chat_image').src = "http://res.cloudinary.com/getfiledata/image/upload/w_200,c_thumb,ar_4:4,g_face/" + member_user_image; +"&nbsp;"
            //  new Date().toLocaleDateString();
        });



    });

</script>